---
title: 博客添加侧边栏近期文章
top: false
comments: true
categories:
  - 建站
tags:
  - hexo
  - next
abbrlink: 5308a4b1
date: 2020-01-16 12:23:38
---

##  1.更改sidebar.swig文件

前几天看到别人的博客有个近期文章版块，感觉挺好，于是就想给自己的博客也加这么个功能。由于使用的是next主题，而next默认是没有这个版块的，那就自己搞一个吧。废话不多说，直接上代码，挺简单的。

<!-- more --> 

 将此代码贴在`next/layout/_macro/sidebar.swig`中的`if theme.links`对应的`endif`后面，就ok了，是不是很简单。。。。

```html
{% if theme.recent_posts %}
    <div class="links-of-blogroll motion-element {{ "links-of-blogroll-" + theme.recent_posts_layout  }}">
      <div class="links-of-blogroll-title">
        <!-- modify icon to fire by szw -->
        <i class="fa fa-history fa-{{ theme.recent_posts_icon | lower }}" aria-hidden="true"></i>
        {{ theme.recent_posts_title }}
      </div>
      <ul class="links-of-blogroll-list">
        {% set posts = site.posts.sort('-date') %}
        {% for post in posts.slice('0', '5') %}
          <li>
            <a href="{{ url_for(post.path) }}" title="{{ post.title }}" target="_blank">{{ post.title }}</a>
          </li>
        {% endfor %}
      </ul>
    </div>
{% endif %}
 
```

## 2.修改主题配置文件

为了配置方便，在主题的`_config.yml`中添加了几个变量，如下：

```css
recent_posts_title: 近期文章
recent_posts_layout: block
recent_posts: true
```

## 3.注意事项

同时运行之后发现有冲突如下

`Unhandled rejection TypeError: (((intermediate value)(intermediate value)(intermediate value) || _fn).call(...) || _fn) is not a function`

在主题的`_config.yml`中更改

在`links_layout`下方的links属性为false

如此：  `links: false`（注意空格）

